{"ast":null,"code":"import _defineProperty from \"/Users/davidpaley/Projects/city-furniture/next-image-example/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"/Users/davidpaley/Projects/city-furniture/next-image-example/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/davidpaley/Projects/city-furniture/next-image-example/component/image/Image.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport * as React from \"react\";\nimport NextImage from \"next/image\";\nvar Image = /*#__PURE__*/React.forwardRef(_c = _s(function (_ref, ref) {\n  _s();\n\n  var id = _ref.id,\n      className = _ref.className,\n      itemProp = _ref.itemProp,\n      src = _ref.src,\n      alt = _ref.alt,\n      title = _ref.title,\n      fallbackImage = _ref.fallbackImage,\n      width = _ref.width,\n      height = _ref.height,\n      priority = _ref.priority,\n      customPreload = _ref.customPreload,\n      _ref$layout = _ref.layout,\n      layout = _ref$layout === void 0 ? \"fixed\" : _ref$layout,\n      testId = _ref.testId,\n      checkBrokenImageInCustomPreload = _ref.checkBrokenImageInCustomPreload,\n      onSuccess = _ref.onSuccess,\n      onError = _ref.onError;\n\n  var _React$useState = React.useState(true),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      error = _React$useState4[0],\n      setError = _React$useState4[1]; // React.useEffect(() => {\n  //   // If an image fails to preload, handle it here in order\n  //   // to avoid reloading it again as a broken image.\n  //   if (!priority) {\n  //     const preload = async () => {\n  //       try {\n  //         await preloadImage(src, checkBrokenImageInCustomPreload);\n  //         setLoading(false);\n  //         onSuccess && onSuccess(src);\n  //       } catch (imageURL) {\n  //         setError(true);\n  //         onError && onError(imageURL);\n  //       }\n  //     };\n  //     preload();\n  //   }\n  // }, [src]);\n\n\n  var isFallback = !src || customPreload && error || customPreload && loading;\n  var imageProps = {\n    id: id,\n    src: isFallback ? \"/no-images-placeholder.jpg\" : src,\n    alt: alt,\n    title: title,\n    itemProp: itemProp,\n    priority: priority\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: className,\n    ref: ref,\n    \"data-testid\": testId,\n    style: {\n      width: \"100%\"\n    },\n    children: width !== undefined && height !== undefined ? /*#__PURE__*/_jsxDEV(NextImage, _objectSpread(_objectSpread({}, imageProps), {}, {\n      \"data-testid\": isFallback ? \"fallbackImage\" : \"image\",\n      layout: layout,\n      width: width,\n      height: height\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }, _this) : /*#__PURE__*/_jsxDEV(NextImage, _objectSpread(_objectSpread({}, imageProps), {}, {\n      \"data-testid\": isFallback ? \"fallbackImage\" : \"image\",\n      layout: \"fill\"\n    }), void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 7\n  }, _this);\n}, \"kXvsasyTsqEEoNcLk29myPNxRAs=\"));\n_c2 = Image;\nImage.displayName = \"Image\";\nexport default Image;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Image$React.forwardRef\");\n$RefreshReg$(_c2, \"Image\");","map":{"version":3,"sources":["/Users/davidpaley/Projects/city-furniture/next-image-example/component/image/Image.tsx"],"names":["React","NextImage","Image","forwardRef","ref","id","className","itemProp","src","alt","title","fallbackImage","width","height","priority","customPreload","layout","testId","checkBrokenImageInCustomPreload","onSuccess","onError","useState","loading","setLoading","error","setError","isFallback","imageProps","undefined","displayName"],"mappings":";;;;;;;;;;;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAOC,SAAP,MAAwD,YAAxD;AAuBA,IAAMC,KAAK,gBAAGF,KAAK,CAACG,UAAN,SACZ,gBAoBEC,GApBF,EAqBkB;AAAA;;AAAA,MAnBdC,EAmBc,QAnBdA,EAmBc;AAAA,MAlBdC,SAkBc,QAlBdA,SAkBc;AAAA,MAjBdC,QAiBc,QAjBdA,QAiBc;AAAA,MAhBdC,GAgBc,QAhBdA,GAgBc;AAAA,MAfdC,GAec,QAfdA,GAec;AAAA,MAddC,KAcc,QAddA,KAcc;AAAA,MAbdC,aAac,QAbdA,aAac;AAAA,MAZdC,KAYc,QAZdA,KAYc;AAAA,MAXdC,MAWc,QAXdA,MAWc;AAAA,MAVdC,QAUc,QAVdA,QAUc;AAAA,MATdC,aASc,QATdA,aASc;AAAA,yBARdC,MAQc;AAAA,MARdA,MAQc,4BARL,OAQK;AAAA,MAPdC,MAOc,QAPdA,MAOc;AAAA,MANdC,+BAMc,QANdA,+BAMc;AAAA,MAJdC,SAIc,QAJdA,SAIc;AAAA,MAHdC,OAGc,QAHdA,OAGc;;AAAA,wBACcpB,KAAK,CAACqB,QAAN,CAAe,IAAf,CADd;AAAA;AAAA,MACTC,OADS;AAAA,MACAC,UADA;;AAAA,yBAEUvB,KAAK,CAACqB,QAAN,CAAe,KAAf,CAFV;AAAA;AAAA,MAETG,KAFS;AAAA,MAEFC,QAFE,wBAIhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,MAAMC,UAAU,GACd,CAAClB,GAAD,IAASO,aAAa,IAAIS,KAA1B,IAAqCT,aAAa,IAAIO,OADxD;AAGA,MAAMK,UAA+D,GAAG;AACtEtB,IAAAA,EAAE,EAAFA,EADsE;AAEtEG,IAAAA,GAAG,EAAEkB,UAAU,GAAG,4BAAH,GAAkClB,GAFqB;AAGtEC,IAAAA,GAAG,EAAHA,GAHsE;AAItEC,IAAAA,KAAK,EAALA,KAJsE;AAKtEH,IAAAA,QAAQ,EAARA,QALsE;AAMtEO,IAAAA,QAAQ,EAARA;AANsE,GAAxE;AASA,sBACE;AACE,IAAA,SAAS,EAAER,SADb;AAEE,IAAA,GAAG,EAAEF,GAFP;AAGE,mBAAaa,MAHf;AAIE,IAAA,KAAK,EAAE;AAAEL,MAAAA,KAAK,EAAE;AAAT,KAJT;AAAA,cAMGA,KAAK,KAAKgB,SAAV,IAAuBf,MAAM,KAAKe,SAAlC,gBACC,QAAC,SAAD,kCACMD,UADN;AAEE,qBAAaD,UAAU,GAAG,eAAH,GAAqB,OAF9C;AAGE,MAAA,MAAM,EAAEV,MAHV;AAIE,MAAA,KAAK,EAAEJ,KAJT;AAKE,MAAA,MAAM,EAAEC;AALV;AAAA;AAAA;AAAA;AAAA,aADD,gBASC,QAAC,SAAD,kCACMc,UADN;AAEE,qBAAaD,UAAU,GAAG,eAAH,GAAqB,OAF9C;AAGE,MAAA,MAAM,EAAC;AAHT;AAAA;AAAA;AAAA;AAAA;AAfJ;AAAA;AAAA;AAAA;AAAA,WADF;AAwBD,CAhFW,kCAAd;MAAMxB,K;AAmFNA,KAAK,CAAC2B,WAAN,GAAoB,OAApB;AAEA,eAAe3B,KAAf","sourcesContent":["import * as React from \"react\";\nimport NextImage, { ImageProps as NextImageProps } from \"next/image\";\nimport { preloadImage } from \"../../utils/customPreload\";\nimport styles from \"../styles/Home.module.css\";\n\ninterface IImageProps {\n  id?: string;\n  className?: string;\n  itemProp?: string;\n  title?: string;\n  src?: string;\n  alt: string;\n  onSuccess?: (imgUrl: string) => void;\n  onError?: (imgUrl: string) => void;\n  fallbackImage?: string;\n  height?: number | string;\n  width?: number | string;\n  priority?: boolean;\n  customPreload?: boolean;\n  checkBrokenImageInCustomPreload?: boolean;\n  layout?: \"responsive\" | \"intrinsic\" | \"fixed\";\n  testId?: string;\n}\n\nconst Image = React.forwardRef<HTMLDivElement, IImageProps>(\n  (\n    {\n      id,\n      className,\n      itemProp,\n      src,\n      alt,\n      title,\n      fallbackImage,\n      width,\n      height,\n      priority,\n      customPreload,\n      layout = \"fixed\",\n      testId,\n      checkBrokenImageInCustomPreload,\n      // CHECK WITH GABY IF HE IS STILL USING THESE PARAMETERS\n      onSuccess,\n      onError,\n    },\n    ref\n  ): JSX.Element => {\n    const [loading, setLoading] = React.useState(true);\n    const [error, setError] = React.useState(false);\n\n    // React.useEffect(() => {\n    //   // If an image fails to preload, handle it here in order\n    //   // to avoid reloading it again as a broken image.\n    //   if (!priority) {\n    //     const preload = async () => {\n    //       try {\n    //         await preloadImage(src, checkBrokenImageInCustomPreload);\n    //         setLoading(false);\n    //         onSuccess && onSuccess(src);\n    //       } catch (imageURL) {\n    //         setError(true);\n    //         onError && onError(imageURL);\n    //       }\n    //     };\n    //     preload();\n    //   }\n    // }, [src]);\n\n    const isFallback =\n      !src || (customPreload && error) || (customPreload && loading);\n\n    const imageProps: Omit<NextImageProps, \"layout\" | \"height\" | \"width\"> = {\n      id,\n      src: isFallback ? \"/no-images-placeholder.jpg\" : src,\n      alt,\n      title,\n      itemProp,\n      priority,\n    };\n\n    return (\n      <div\n        className={className}\n        ref={ref}\n        data-testid={testId}\n        style={{ width: \"100%\" }}\n      >\n        {width !== undefined && height !== undefined ? (\n          <NextImage\n            {...imageProps}\n            data-testid={isFallback ? \"fallbackImage\" : \"image\"}\n            layout={layout}\n            width={width}\n            height={height}\n          />\n        ) : (\n          <NextImage\n            {...imageProps}\n            data-testid={isFallback ? \"fallbackImage\" : \"image\"}\n            layout=\"fill\"\n          />\n        )}\n      </div>\n    );\n  }\n);\n\nImage.displayName = \"Image\";\n\nexport default Image;\n"]},"metadata":{},"sourceType":"module"}